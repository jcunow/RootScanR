% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CreateDepthmap3.R
\name{create_depthmap}
\alias{create_depthmap}
\title{Create A Phase-Shifted, Tilt-Amplitude Sine Depth Map}
\usage{
create_depthmap(
  img,
  mask = NULL,
  sinoid = TRUE,
  tube.thicc = 7,
  tilt = 45,
  dpi = 300,
  start.soil = 0,
  center.offset = 0,
  select.layer = 2
)
}
\arguments{
\item{img}{Input image (accepts terra SpatRaster, matrix, array, or file path). For multi-band
images, specify band_index parameter}

\item{mask}{Raster mask indicating foreign objects (1 = mask, 0 or NA = keep)}

\item{sinoid}{Logical; if TRUE, accounts for tube curvature in depth calculation}

\item{tube.thicc}{Numeric; diameter of minirhizotron tube in cm}

\item{tilt}{Numeric; minirhizotron tube insertion angle in degrees (typically 30-45)}

\item{dpi}{Numeric; image resolution in dots per inch}

\item{start.soil}{Numeric; soil surface boundary in cm (0 = surface)}

\item{center.offset}{Numeric; rotational center offset (0 = centered, 1 = edge)}

\item{select.layer}{Integer. Specifies which layer to use if the input is a multi-band image. Default is `2`.}
}
\value{
terra raster object containing the depth map
}
\description{
This function generates a depth map for minirhizotron images, accounting for tube geometry
and insertion angle.
}
\examples{
data(seg_Oulanka2023_Session01_T067)
seg_Oulanka2023_Session01_T067 = terra::rast(seg_Oulanka2023_Session01_T067)
img = seg_Oulanka2023_Session01_T067
mask = seg_Oulanka2023_Session01_T067[[1]] - seg_Oulanka2023_Session01_T067[[2]]
mask[mask == 255] <- NA
map = create_depthmap(img,mask,start.soil = 0.1,
  sinoid = TRUE,
  tube.thicc = 7,
  tilt = 45,
  dpi = 300,
  center.offset = 0 )
}
\author{
Johannes Cunow, Robert Weigel
}
