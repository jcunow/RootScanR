% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/diameter_calculation.R
\name{root.diameters}
\alias{root.diameters}
\title{Estimate Root Diameters}
\usage{
root.diameters(
  img,
  diagnostics = FALSE,
  skeleton_method = "GuoHall",
  select.layer = 2
)
}
\arguments{
\item{img}{A character string (file path), `SpatRaster`, `RasterBrick`, `RasterLayer`, `cimg`, `magick-image`, or array.
The input image to process.}

\item{diagnostics}{Logical. If `TRUE`, enables diagnostic plots and logging. Default is `FALSE`.}

\item{skeleton_method}{Character. The method to use for skeletonization. Default is `"Guo-Hall"`.}

\item{select.layer}{Integer. Specifies which layer to use if the input is a multi-band image. Default is `2`.}
}
\value{
A list containing:
\describe{
  \item{quantiles}{Numeric vector of diameter quantiles (10th to 100th percentile).}
  \item{mean_diameter}{Numeric. The mean root diameter.}
  \item{median_diameter}{Numeric. The median root diameter.}
  \item{diameters}{Numeric vector of all diameter values in the skeletonized regions.}
  \item{skeleton_rast}{`SpatRaster`. Binary raster mask of skeletonized regions.}
  \item{diameter_rast}{`SpatRaster`. Raster showing diameters in the skeletonized regions.}
  \item{distance_map_rast}{`SpatRaster`. Raster showing the distance transform values.}
}
}
\description{
This function estimates root diameters from an input image using skeletonization and distance transform methods.
The input can be a file path, raster, image object, or array, which is converted to a binary image before processing.
}
\details{
The function works as follows:
- Converts the input image to a binary format (`cimg`).
- Applies a distance transform to compute the Euclidean distance for the foreground (root) pixels.
- Skeletonizes the binary image to identify root centerlines.
- Filters distance values to retain only those corresponding to the skeletonized regions.
- Computes diameter statistics, including quantiles, mean, and median diameters.

The function supports various input formats and normalizes image values to the range [0, 1] if needed. It uses the `terra` package for raster operations and the `imager` package for image processing.
}
\examples{
# Example usage:
data(seg_Oulanka2023_Session01_T067)
result <- root.diameters(
img = seg_Oulanka2023_Session01_T067,
skeleton_method = "MAT", select.layer = 2,
diagnostics = TRUE)

# Access results:
print(result$mean_diameter)
terra::plot(result$skeleton_rast)

}
