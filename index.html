<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Depth-Resolved Root Analysis and Trait Extraction from Minirhizotrons and Flatbed Scanner â€¢ RootScanR</title>
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="deps/Aleo-0.4.9/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Depth-Resolved Root Analysis and Trait Extraction from Minirhizotrons and Flatbed Scanner">
<meta name="description" content="RootScanR enables depth-resolved analysis of minirhizotron images and trait extraction from flatbed root scans. Designed for studying root dynamics and morphology, it provides tools for root density, skeletonization, depth profiling, and trait quantification. Track roots in depth. Extract traits in detail. Rotational biases of minirhizotron tubes can also be assessed. Minirhizotron scans will need to be segmented beforehand (e.g., RootDetector, RootPainter).">
<meta property="og:description" content="RootScanR enables depth-resolved analysis of minirhizotron images and trait extraction from flatbed root scans. Designed for studying root dynamics and morphology, it provides tools for root density, skeletonization, depth profiling, and trait quantification. Track roots in depth. Extract traits in detail. Rotational biases of minirhizotron tubes can also be assessed. Minirhizotron scans will need to be segmented beforehand (e.g., RootDetector, RootPainter).">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">RootScanR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/FlatBedScans_vignettes.html%20articles/MinirhizotronScans_vignettes.html%20articles/Rotation_Bias_vignettes.html">Tutorial</a></li>
<li class="nav-item"><h6 class="dropdown-header" data-toc-skip>DemoFile</h6></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jcunow/RootScanR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rootscanr---r-package">RootScanR - R package<a class="anchor" aria-label="anchor" href="#rootscanr---r-package"></a>
</h1></div>
<p><br></p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><em>RootScanR</em> is a package which has been designed to make the analysis of minirhizotron root scans just a little less stupid. The package relies on prior Image segmentation. We recommend using <em>RootDetector</em> or <em>RootPainter</em>. This packages enables the user to map various root features to a continue s depth distributions. The user has the choice to include the tube insertion angle and tube diameter - or ignore it (?). Rotational bias of root prevalence can be tested. Let me know if you have questions, improvements, or found bugs &amp; errors.</p>
<pre><code><span><span class="co"># install the package</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jcunow/RootScanR"</span><span class="op">)</span></span></code></pre>
<hr>
<p><br></p>
</div>
<div class="section level2">
<h2 id="calibration">Calibration<a class="anchor" aria-label="anchor" href="#calibration"></a>
</h2>
<p>More accurate results require easy to gather <em>in-situ</em> calibration of each tube. Traditionally, the assumption is that all tube have been installed perfectly, i.e., exact same insertion angle, insertion depth, same scanner rotation position, and tape overshoot for each tube. RootScanR offers the possibility to approximate the soil start and rotation center based an assumption of well-taped tubes.</p>
<ol style="list-style-type: decimal">
<li>Soil Surface Position Estimation</li>
</ol>
<pre><code><span><span class="va">start.soil</span> <span class="op">=</span> <span class="fu">SoilSurfE</span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span></code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Scanner Rotation Position, Rotation Differences Between Two Scans, and Removal of Scan Edges only present in one Scan and not the other.</li>
</ol>
<pre><code><span><span class="fu">RotationE</span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="fu">RotShiftDet</span><span class="op">(</span><span class="va">img1</span>,<span class="va">img2</span><span class="op">)</span></span>
<span><span class="fu">RotCensor</span><span class="op">(</span><span class="va">img</span>,center.offset <span class="op">=</span> <span class="fl">0.3</span>,fixed.rotation <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># under construction: estimating rotation by root distribution (assuming top-tube bias)</span></span>
<span><span class="fu"><a href="reference/LR_rhythmicity.html">LR_rhythmicity</a></span><span class="op">(</span><span class="va">rotation.cuts</span>, <span class="va">root.px</span>, period<span class="op">=</span> <span class="va">number.rotation.slices</span><span class="op">)</span><span class="op">$</span><span class="va">phase</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">roation.cuts</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">/</span><span class="va">number.rotations.slices</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p><br></p>
</div>
<div class="section level2">
<h2 id="the-core-function-create-a-depthmap">The core function: Create a depthmap<a class="anchor" aria-label="anchor" href="#the-core-function-create-a-depthmap"></a>
</h2>
<p>requires: soil surface estimate, rotation center estimate, tube insertion angle, tube diameter, scan resolution</p>
<ol style="list-style-type: decimal">
<li>Phase shifted, trimmed sine depth mapping including tube diameter and tube insertion angle</li>
</ol>
<pre><code><span><span class="va">depthmap</span> <span class="op">=</span> <span class="fu"><a href="reference/create_depthmap.html">create_depthmap</a></span><span class="op">(</span><span class="va">img</span>,<span class="va">mask</span>, tube.thicc <span class="op">=</span> <span class="fl">7</span>, tilt <span class="op">=</span> <span class="fl">45</span>, dpi <span class="op">=</span> <span class="fl">300</span>, start.soil <span class="op">=</span> <span class="fl">0</span>,center.offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre>
<p><br></p>
</div>
<div class="section level2">
<h2 id="zoning---create-analytical-units">Zoning - Create analytical units<a class="anchor" aria-label="anchor" href="#zoning---create-analytical-units"></a>
</h2>
<p>Creates discrete sub-units of the whole image. This determines the resolution of the depth distributions. Currently, the package only supports analysis within discrete depth bands. Future releases will tackle response functions on continuous depth.</p>
<ol style="list-style-type: decimal">
<li>Depth-wise zoning</li>
</ol>
<pre><code><span><span class="va">binned.map</span> <span class="op">=</span> <span class="fu"><a href="reference/binning.html">binning</a></span><span class="op">(</span><span class="va">depthmap</span>, nn <span class="op">=</span> <span class="fl">1</span>,<span class="st">"rounding"</span><span class="op">)</span></span>
<span><span class="va">root.zone</span> <span class="op">=</span> <span class="fu"><a href="reference/zone.fun.html">zone.fun</a></span><span class="op">(</span><span class="va">img</span>, <span class="va">binned.map</span>, indexD <span class="op">=</span> <span class="fl">5</span>, nn <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre>
<p><br></p>
</div>
<div class="section level2">
<h2 id="feature-extractions">Feature Extractions<a class="anchor" aria-label="anchor" href="#feature-extractions"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Parameter from segmented image cut</li>
</ol>
<pre><code><span><span class="fu">RootScapeMetrics</span><span class="op">(</span><span class="va">root.zone</span>, metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lsm_c_ca"</span>,<span class="st">"lsm_c_pland"</span>,<span class="st">"lsm_c_enn_mn"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">Root.px</span> <span class="op">=</span> <span class="fu">count_pixel</span><span class="op">(</span><span class="va">root.zone</span><span class="op">)</span></span></code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Parameter from skeletonized image cut</li>
</ol>
<pre><code><span><span class="va">root.zone.skl</span> <span class="op">=</span> <span class="fu"><a href="reference/skeletonize_image.html">skeletonize_image</a></span><span class="op">(</span><span class="va">root.zone</span>, method <span class="op">=</span> <span class="st">"MAT"</span>, layer <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">RL</span> <span class="op">=</span> <span class="fu"><a href="reference/root_length.html">root_length</a></span><span class="op">(</span><span class="va">root.zone.skeleton</span><span class="op">)</span></span></code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Combine both</li>
</ol>
<pre><code><span><span class="fu">root.thickness</span><span class="op">(</span><span class="va">Root.px</span>, <span class="va">RL</span><span class="op">)</span></span></code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Parameter from RGB image cut</li>
</ol>
<pre><code><span><span class="va">Rhizosphere</span> <span class="op">=</span> <span class="fu">Halo</span><span class="op">(</span><span class="va">root.zone</span>, width <span class="op">=</span> <span class="fl">5</span>, halo.only <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">soil</span> <span class="op">=</span> <span class="va">rgb.img</span><span class="op">[</span><span class="va">Rhizosphere</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;</span> <span class="op">-</span> <span class="cn">NA</span></span>
<span><span class="fu"><a href="reference/analyze_soil_texture.html">analyze_soil_texture</a></span><span class="op">(</span><span class="va">soil</span><span class="op">)</span></span>
<span><span class="va">soil.color</span> <span class="op">=</span> <span class="fu"><a href="reference/tube_coloration.html">tube_coloration</a></span><span class="op">(</span><span class="va">soil</span><span class="op">)</span></span></code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Turnover - either two images from different time points, or the â€˜RootDetectorâ€™ root tracking output</li>
</ol>
<pre><code><span><span class="fu"><a href="reference/turnover_tc.html">turnover_tc</a></span><span class="op">(</span><span class="va">root.zone1</span>,<span class="va">root.zone2</span>, method <span class="op">=</span> <span class="st">"kimura"</span>,dpi <span class="op">=</span> <span class="fl">300</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/turnover_dpc.html">turnover_dpc</a></span><span class="op">(</span><span class="va">root.zone.dpc</span>, product.layer <span class="op">=</span> <span class="fl">2</span>, decay.layer <span class="op">=</span> <span class="fl">1</span>, im.return <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre>
<p><br></p>
</div>
<div class="section level2">
<h2 id="rotational-bias">Rotational Bias<a class="anchor" aria-label="anchor" href="#rotational-bias"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Rotational zoning, Feature Extraction,</li>
</ol>
<pre><code><span><span class="va">rotation.rootpx</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>kk <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">12</span>,px <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">rotation.rootpx</span><span class="op">)</span><span class="op">{</span></span>
<span><span class="va">rotation.zone</span> <span class="op">=</span> <span class="fu"><a href="reference/zone.rotation.fun.html">zone.rotation.fun</a></span><span class="op">(</span><span class="va">img</span>,k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span>,<span class="va">i</span><span class="op">)</span>,kk <span class="op">=</span> <span class="fl">12</span>, mm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1500</span>,<span class="fl">5000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rotation.rootpx</span><span class="op">$</span><span class="va">px</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">=</span> <span class="fu">count_pixel</span><span class="op">(</span><span class="va">rotation.zone</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span></code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Test Amplitude Difference Can be used to text e.g., differences in top-bottom-tube bias between varying insertion angle or tube diameter To test differences between sinus fits, we make use of the diffCircadian package <a href="https://github.com/diffCircadian/diffCircadian" class="external-link uri">https://github.com/diffCircadian/diffCircadian</a>
</li>
</ol>
<pre><code><span><span class="fu"><a href="reference/fitSinCurve.html">fitSinCurve</a></span><span class="op">(</span><span class="va">rotation.rootpx</span><span class="op">$</span><span class="va">px</span>,period <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span><span class="fu">LTTest_diff_amp</span><span class="op">(</span><span class="va">img1_rotation.rootpx</span><span class="op">$</span><span class="va">px</span>,<span class="va">img2_rotation.rootpx</span><span class="op">$</span><span class="va">px</span><span class="op">)</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jcunow/RootScanR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jcunow/RootScanR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing RootScanR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Johannes Cunow <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0009-0006-4830-1162" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Cunow.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
